window.rp=new Reepay.ModalCheckout,jQuery((function(e){jQuery("form.checkout").on("checkout_place_order_success",(function(e,o){if(!o.hasOwnProperty("is_reepay_checkout"))return!0;try{wc_reepay.buildModalCheckout(o.reepay.id,o.accept_url)}catch(e){console.warn(e)}return!1})),e(document).ready((function(){if(window.location.hash.indexOf("#!reepay-pay")>-1){const e=document.location.hash.replace("#!reepay-pay",""),o=new URLSearchParams(e);let r=o.get("rid"),c=o.get("accept_url");window.setTimeout((function(){wc_reepay.buildModalCheckout(r,c),history.pushState("",document.title,window.location.pathname)}),300)}}))})),wc_reepay={buildModalCheckout:function(e,o){setTimeout((()=>jQuery(".woocommerce-error").remove())),"WINDOW"!==WC_Gateway_Reepay_Checkout.payment_type?(window.rp.show(e),window.rp.addEventHandler(Reepay.Event.Accept,(function(e){console.log("Accept",e);let r=o;for(let o in e)r=wc_reepay.setUrlParameter(r,o,e[o]);window.location.href=r})),window.rp.addEventHandler(Reepay.Event.Cancel,(function(e){console.log("Cancel",e),wc_reepay.throw_error(WC_Gateway_Reepay_Checkout.cancel_text)})),window.rp.addEventHandler(Reepay.Event.Close,(function(e){jQuery("form.checkout").removeClass("processing").unblock(),console.log("Close",e)})),window.rp.addEventHandler(Reepay.Event.Error,(function(e){console.log("Error",e),wc_reepay.throw_error(WC_Gateway_Reepay_Checkout.error_text)}))):new Reepay.WindowCheckout(e)},throw_error:function(e){jQuery((function(o){const r=o("form.checkout");r.removeClass("processing").unblock(),o(".woocommerce-NoticeGroup").remove(),r.before('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout"><ul class="woocommerce-error" role="alert"><li>'+e+"</li></ul></div>");let c=o(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout");c.length||(c=o(".form.checkout")),c.length&&o("html, body").animate({scrollTop:c.offset().top-100},1e3)}))},setUrlParameter:function(e,o,r){var c=e.split("?")[0],t="?"+e.split("?")[1],n=o+"="+r,a="?"+n;if(t){var l=new RegExp("([?&])"+o+"[^&]*"),u=new RegExp("([?&])"+o+"=[^&;]+[&;]?");a=null==r||""===r?(a=t.replace(u,"$1")).replace(/[&;]$/,""):null!==t.match(l)?t.replace(l,"$1"+n):t+"&"+n}return c+(a="?"===a?"":a)}};